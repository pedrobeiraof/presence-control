<!DOCTYPE html>
<html>
<head>
	<link rel="stylesheet" type="text/css" href="//cdn.datatables.net/1.10.19/css/jquery.dataTables.min.css">
</head>
<body>
	{% if aula.active %}
		<a href="end">Finalizar</a>
	{% else %}
		<a href="start">Start</a>
	{% endif %}
	<table id="alunos-table">
	     <thead>
	         <tr>
	         	<th>Nome</th>
	         	<th>Status</th>
	         </tr>
	     </thead>
     	<tbody></tbody>
	</table>

</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<script src="http://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js" type="text/javascript"></script>
<script type="text/javascript" language="javascript" class="init">
	$(document).ready(function() {
         var table = $('#alunos-table').dataTable( {
             "processing": true,
             "ajax": {
                 "processing": true,
                 "url": "/get-alunos",
                 "dataSrc": ""
             },

             "columns": [
                     { "data": "fields.nome" },
                     { "data": null, render: function ( data, type, row ) {
                     	if (data.fields.is_presente) {
                     		return "Presente"
                     	}
                		return "Ausente"
        			 }}
                 ]
         } );

         setInterval( function () {
		    table.api().ajax.reload();
		}, 5000 );
     } );
 </script>
</html>